<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Aaron Fisher</title><link>http://aaronjfisher.github.io/</link><description></description><atom:link href="http://aaronjfisher.github.io/feeds/all.rss.xml" rel="self"></atom:link><lastBuildDate>Wed, 30 Jul 2014 00:00:00 -0400</lastBuildDate><item><title>ggBrain - An R package for beautiful brain figures</title><link>http://aaronjfisher.github.io/ggBrain-debut.html</link><description>&lt;p&gt;Check out this lovely brain image figure! I wrote &lt;a href="https://github.com/aaronjfisher/ggBrain" target="_blank"&gt;an R package called ggBrain&lt;/a&gt; that lets you can generate figures like these with just a couple lines of code!&lt;/p&gt;
&lt;p&gt;&lt;img src="blog_supplements/2014-07-24_ggBrain-debut/2014-07-30_RAVENS_PCA_saggital_fitted.png" alt="bootPCAimg" style="width: 100%;"/&gt;&lt;/p&gt;
&lt;p&gt;This figure is from my recent &lt;a href="http://arxiv.org/abs/1405.0922" target="_blank"&gt;paper on fast, exact methods for bootstrapping high dimensional data (&amp;gt;1 million measurements per subject)&lt;/a&gt;. When I was working on figures for the paper, I knew that I wanted to use ggplot, but I ended up being surprised by how much tweaking and planning was needed. To help automate the process, I wrote up an R package called &lt;a href="https://github.com/aaronjfisher/ggBrain" target="_blank"&gt;ggBrain&lt;/a&gt;, which transforms brain image arrays into ggplot objects.&lt;/p&gt;
&lt;p&gt;The main step &lt;a href="https://github.com/aaronjfisher/ggBrain" target="_blank"&gt;ggBrain&lt;/a&gt; handles is the reshaping of 3-dimensional or 4-dimensional brain image arrays into 2-dimensional, "long" data frames -- the data format required for ggplot. The generated data frames only contain information about the slices to be shown in the final figure. Index variables are included to allow the final figures to contain multiple panels (faceted figures). Panels can contain images from different slices, different time points (in fMRI), or different subjects.&lt;/p&gt;
&lt;p&gt;The package can also automate several aesthetic options, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tri-planar figures:  For a given voxel, a tri-planar figure shows the sagittal, coronal, and transverse slices that intersect that voxel. These three slices are shown in three panels, and cross-hairs are generated to show the spacial correspondence between the slices (see example below).&lt;/li&gt;
&lt;li&gt;Separete fill scales for template brain images and for overlaying voxel-wise statistics: ggplot2 generally discourages the use of color to display different types of data, on different scales. This makes it hard to use color to show both a brain image template, and to show the value, or sign, of a voxel-wise statistic overlaid on top of that template (see below for an example with seed correlation). The template tissue intensities and the test statistic values are on different scales, which goes against ggplot's method of mapping only one scale to color. In this package, I chose to do the quick fix of hardcoding the coloring of the template image, so that only the voxelwise statistic is formally mapped through ggplot.&lt;/li&gt;
&lt;li&gt;ggplot themes for changing the background to be black, and for removing irrelevant plot labels. &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Examples&lt;/h2&gt;
&lt;p&gt;The vignette for &lt;a href="https://github.com/aaronjfisher/ggBrain" target="_blank"&gt;ggBrain&lt;/a&gt; (see &lt;code&gt;help(package=ggBrain)&lt;/code&gt;) contains several code examples with explanation, so I'll just give some very general examples here. They should give you a sense for the small amount of code required for each figure. In these code chunks, &lt;code&gt;dd&lt;/code&gt; is a standard ggplot object. Aesthetic changes are added to &lt;code&gt;dd&lt;/code&gt; using the usual ggplot syntax.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;# Seed correlation map (stored in the array s_map1)&lt;/span&gt;
&lt;span class="c1"&gt;# mar=3 selects the Transverse plane, and mar_ind=30 selects the slice index.&lt;/span&gt;
dd&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;ggBrain&lt;span class="p"&gt;(&lt;/span&gt;template&lt;span class="o"&gt;=&lt;/span&gt;template&lt;span class="p"&gt;,&lt;/span&gt;brains&lt;span class="o"&gt;=&lt;/span&gt;s_map1&lt;span class="p"&gt;,&lt;/span&gt;mask&lt;span class="o"&gt;=&lt;/span&gt;mask&lt;span class="p"&gt;,&lt;/span&gt;mar&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    mar_ind&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;type&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;signed&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

dd &lt;span class="o"&gt;+&lt;/span&gt; labs&lt;span class="p"&gt;(&lt;/span&gt;title&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Seed Correlation Map&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
    theme_black_bg&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="alt-text" src="blog_supplements/2014-07-24_ggBrain-debut/seed_map.png" /&gt;&lt;/p&gt;
&lt;p&gt;Above, the sign of the correlation is mapped to fill (with a binary scale), and the absolute value of the correlation is mapped to alpha blending (transparency). By default, &lt;a href="https://github.com/aaronjfisher/ggBrain" target="_blank"&gt;ggBrain&lt;/a&gt; bins the data in order to combine the legends for alpha blending and for fill.&lt;/p&gt;
&lt;p&gt;It's also possible to fix a constant level of alpha blending across the image, and to map the raw value of the correlation to a diverging color scale. However, I'm not a fan of the white patches in low correlation regions that result from this approach, and tend to prefer the mapping setup used above.&lt;/p&gt;
&lt;p&gt;The image below is an example of a tri-planar figure. Again, for a given voxel, a tri-planar figure shows the sagittal, coronal, and tranvserse slices that intersect that voxel. This tri-planar figure shows the seed region used to calculate the seed correlation map above.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;column_ind &lt;span class="o"&gt;=&lt;/span&gt; factor&lt;span class="p"&gt;(&lt;/span&gt;c&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;labels&lt;span class="o"&gt;=&lt;/span&gt;c&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Sagittal&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Coronal&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Transverse&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

dd&lt;span class="o"&gt;&amp;lt;-&lt;/span&gt;ggBrain&lt;span class="p"&gt;(&lt;/span&gt;brains&lt;span class="o"&gt;=&lt;/span&gt;seed_mask&lt;span class="p"&gt;,&lt;/span&gt;template&lt;span class="o"&gt;=&lt;/span&gt;template&lt;span class="p"&gt;,&lt;/span&gt;mar&lt;span class="o"&gt;=&lt;/span&gt;c&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    mar_ind&lt;span class="o"&gt;=&lt;/span&gt;c&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;37&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;30&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;row_ind&lt;span class="o"&gt;=&lt;/span&gt;c&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; col_ind&lt;span class="o"&gt;=&lt;/span&gt;column_ind&lt;span class="p"&gt;,&lt;/span&gt;
    type&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;binary&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;binary_color&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;black&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;tri_planar&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;mask&lt;span class="o"&gt;=&lt;/span&gt;mask&lt;span class="p"&gt;)&lt;/span&gt;

dd &lt;span class="o"&gt;+&lt;/span&gt; labs&lt;span class="p"&gt;(&lt;/span&gt;alpha&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Seed mask&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; theme_black_bg&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="alt-text" src="blog_supplements/2014-07-24_ggBrain-debut/seed_mask_triplane.png" /&gt;&lt;/p&gt;
&lt;p&gt;If you're interested, please &lt;a href="https://github.com/aaronjfisher/ggBrain" target="_blank"&gt;check out the package!&lt;/a&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Aaron Fisher</dc:creator><pubDate>Wed, 30 Jul 2014 00:00:00 -0400</pubDate><guid>tag:aaronjfisher.github.io,2014-07-30:ggBrain-debut.html</guid><category>plots</category><category>brain imaging</category></item><item><title>Don't go to Hogwarts if you're into science</title><link>http://aaronjfisher.github.io/dont-go-to-hogwarts.html</link><description>&lt;p&gt;I sometimes hear people say that they wish they could've gone to Hogwarts School of Witchcraft and Wizardry (HSWW), but there’s a drawback of HSWW that's often overlooked. You can do a lot with a degree from HSWW, but the one thing that’s hard to do is to become a scientist. In fact, there's very little emphasis on science in the HSWW culture. Students learn plenty of spells and potion recipes, but nobody at the school has a good understanding of how magic actually works -- after thousands of years, they still call it magic! It’s possible that no one in the wizarding world has ever studied the mechanisms underlying magic, but I don't buy it. How could wizards have witnessed the muggle scientific revolution, and not looked at wands under a microscope? No, there must be scientific research institutions in the wizarding world too, which leads to only conclusion:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Hogwarts is a technical school.&lt;/em&gt; It's where you go to learn a craft. It's great at sports, but not so great with cutting edge research.&lt;/p&gt;
&lt;p&gt;Of course, HSWW &lt;em&gt;was&lt;/em&gt; on the front lines of preventing a global holocaust, while professors from Beauxbatons and Durmstrang Institute were off in their ivory towers, presumably debating time travel paradoxes or developing new languages for object-oriented spell casting. When shit hit the fan, HSWW stepped up. &lt;/p&gt;
&lt;p&gt;That said, there must be another school out there that’s experimenting with new yeast strains for butter-beer, and running clinical trials on healing charms. If you like science, that’s the place to be.&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;br/&gt;
&lt;em&gt;Notes:&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;A friend has pointed out that this post is very similar to the fan fiction work &lt;a href="http://hpmor.com/"&gt;Harry Potter and the Methods of Rationality&lt;/a&gt;, which is essentially the same joke but much more fleshed out.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;While there's a potential analogy to black box models here, this post really doesn't have much to do with statistics. Future posts will be more relevant to stats, with high probability.&lt;/em&gt;
&lt;br/&gt;&lt;/li&gt;
&lt;/ul&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Aaron Fisher</dc:creator><pubDate>Tue, 10 Jun 2014 00:00:00 -0400</pubDate><guid>tag:aaronjfisher.github.io,2014-06-10:dont-go-to-hogwarts.html</guid><category>black-box models</category><category>humor</category></item><item><title>Mission Statement for the Blog</title><link>http://aaronjfisher.github.io/mission-statement.html</link><description>&lt;p&gt;In this blog, I'll talk about issues in statistics from a graduate student's perspective. Some specific topics include: surviving a PhD, enjoying a PhD, designing intuitive graphics, and dealing with high dimensional data. There will also be musings from time to time about food/cooking (i.e. JHSPH Biostat Chili Cookoff strategy), and culture in general.&lt;/p&gt;
&lt;p&gt;I'll try to keeps these posts clear and concise, with working code examples. &lt;/p&gt;
&lt;p&gt;Hope you enjoy!&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Aaron Fisher</dc:creator><pubDate>Mon, 07 Apr 2014 00:00:00 -0400</pubDate><guid>tag:aaronjfisher.github.io,2014-04-07:mission-statement.html</guid><category>blog</category></item></channel></rss>